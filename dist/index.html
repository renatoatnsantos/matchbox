<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MatchBox</title>
    <link rel="stylesheet" href="./assets/css/all.css">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
</head>
<body>

<div id="app">
    <page-main></page-main>
</div>

<script type="text/x-template" id="page-main">
    <div class="container">
        <h1 class="text-center">Gulp automatizador </h1>
        <div class="col-md-4 offset-md-4">
            <div v-for="(list , index ) of jsonData">
                <div class="row container-percent">
                    <div class="col-md-3 circle-img">
                        <img :src="list.picture">
                        <span class="circle-number">{{index}}</span>
                    </div>
                    <div class="col-md-9">
                        <span class="title">{{list.name}}</span>
                        <p class="description my-0">{{list.description}}</p>
                        <div class="position-percent">
                            <div class="text-center percent">
                                <span class="total px-0">
                                    <p class="my-0">Gostam</p>
                                    <span class="spercent"><strong>{{positive(list)}} %</strong></span>
                                </span>
                                <span class="total px-0">
                                    <p class="my-0">NÃ£o gostam</p>
                                    <span class="spercent"><strong>{{negative(list)}} %</strong></span>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</script>

<script src="./assets/js/all.js"></script>

<script>


    Vue.component('page-main' ,{
        template : '#page-main',
        data(){
            return {
                jsonData : []
            }
        },
        mounted(){
            let jsonData = this.requestJson()
        },
        methods : {
            requestJson(){
              let data = axios.get('http://localhost:3000/json')
                  .then(resp => this.jsonData = resp.data.data)
            },
            positive(total){
                let pos = total.positive + total.negative;
                pos = total.positive / pos * 100;
                pos = new Intl.NumberFormat().format(pos);
                pos = parseFloat(pos).toFixed(0);
                return pos;
            },
            negative(total){
                let pos = total.positive + total.negative;
                pos = total.negative / pos * 100;
                pos = new Intl.NumberFormat().format(pos);
                pos = parseFloat(pos).toFixed(0);
                return pos;
            }
        },
    })
    new Vue({
        el : "#app",
    });

</script>

</body>
</html>